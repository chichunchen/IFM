<nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <a class="navbar-brand" href="/">資財系二手書</a>
      <a class="navbar-brand" href="/books">
        <small>買書</small>
      </a>
      <a class="navbar-brand" href="/books/new">
        <small>賣書</small>
      </a>
      <form class="navbar-form navbar-left" role="search">
        <%= form_tag books_path, :method => 'get' do %>
          <%= hidden_field_tag :direction, params[:direction] %>
          <%= hidden_field_tag :sort, params[:sort] %>
            <div class="form-group">
              <%= text_field_tag :search, params[:search], :placeholder => "Search", :class => "form-control" %>
              <%= submit_tag "Submit", :name => nil, :class => "btn btn-default" %>
            </div>
        <% end %>
      </form>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        <% if !current_user %>
        <li> 
          <%= link_to "臉書登入", user_omniauth_authorize_path(:facebook) %>
        </li>
        <li> <%= link_to("註冊", new_user_registration_path) %> </li>
        <li> <%= link_to("登入", new_user_session_path) %> </li>
        <% else %>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            Hi!, <%= current_user.name %>  
            <b class="caret"></b>
          </a>
          <ul class="dropdown-menu">
            <li><%= link_to("帳號設定", edit_user_registration_path )%></li>
            <li> <%= link_to("登出", destroy_user_session_path, 
                               :method => :delete ) %></li>
          </ul>
        </li>
        <% end %>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>